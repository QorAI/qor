# QOR Installation Guide
========================

This guide covers every step from zero to running QOR on
Windows, macOS, and Linux.

---

## 1. Check Your System

### Minimum Requirements
- Python 3.9 or higher
- 4GB RAM (8GB recommended)
- 500MB disk space + training data

### Check Python
Open a terminal (Command Prompt on Windows, Terminal on macOS/Linux):
```bash
python --version
```
If this shows Python 3.9+ you're good. If not, install Python:
- **Windows**: Download from https://python.org → "Download Python 3.12"
  - IMPORTANT: Check "Add Python to PATH" during installation!
- **macOS**: `brew install python` or download from python.org
- **Linux**: `sudo apt install python3 python3-pip` (Ubuntu/Debian)

### Check pip
```bash
pip --version
```
If not found: `python -m ensurepip --upgrade`

---

## 2. Install PyTorch

PyTorch is the ML framework that powers QOR.

### Windows with NVIDIA GPU (fastest training)
```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
```

### Windows CPU only
```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu
```

### macOS (Apple Silicon M1/M2/M3)
```bash
pip install torch torchvision torchaudio
```

### macOS (Intel)
```bash
pip install torch torchvision torchaudio
```

### Linux with NVIDIA GPU
```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
```

### Linux CPU only
```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu
```

### Verify PyTorch
```bash
python -c "import torch; print(f'PyTorch {torch.__version__}'); print(f'CUDA: {torch.cuda.is_available()}')"
```

You should see:
```
PyTorch 2.x.x
CUDA: True       ← If you have an NVIDIA GPU
CUDA: False      ← If CPU only (that's fine!)
```

---

## 3. Install QOR Dependencies

### Minimum (just training and basic usage)
```bash
pip install tokenizers flask flask-cors
```

### Recommended (includes web search for zero-hallucination)
```bash
pip install tokenizers flask flask-cors duckduckgo-search
```

### Full (all features including data download and export)
```bash
pip install tokenizers flask flask-cors duckduckgo-search datasets safetensors huggingface_hub
```

### Or install from requirements file
```bash
pip install -r requirements.txt
```

---

## 4. Set Up QOR

### Extract the zip
Extract `qor.zip` into your project folder. You should have:
```
my-project/
└── qor/
    ├── __init__.py
    ├── __main__.py
    ├── model.py
    ├── ... (19 files total)
    └── README.md
```

### Run setup
```bash
cd my-project
python -m qor setup
```

This creates all necessary folders:
```
my-project/
├── qor/              ← QOR package
├── data/             ← Training data goes here
├── learn/            ← Continual learning folder
├── knowledge/        ← RAG knowledge base
├── checkpoints/      ← Saved models
└── sample data       ← Generated by setup
```

### Verify everything works
```bash
python -m qor tokenizer
python -m qor train --device cpu --steps 100
python -m qor generate "Hello, my name is"
```

If you see generated text, QOR is working!

---

## 5. Your First Training Run

### Quick test (2 minutes)
```bash
python -m qor setup
python -m qor tokenizer
python -m qor train --device cpu --steps 500
python -m qor chat
```

### Real training with GPU (15 minutes)
```bash
python -m qor setup
python prepare_data.py --source wikipedia --max-articles 2000
python -m qor tokenizer
python -m qor train --device cuda --steps 10000
python -m qor chat
```

### Serious training (1+ hours)
```bash
python prepare_data.py --source all
python -m qor tokenizer
python -m qor train --device cuda --size medium --steps 50000
```

---

## 6. Set Up Zero Hallucination (Optional but Recommended)

### Install web search tool
```bash
pip install duckduckgo-search
```

### Add documents to knowledge base
Put any `.txt` files in the `knowledge/` folder:
```bash
# Copy your documents
cp ~/Documents/company_policy.txt knowledge/
cp ~/Documents/product_manual.txt knowledge/
cp ~/Documents/faq.txt knowledge/
```

### Test it
```bash
python -m qor chat
```

Now when QOR doesn't know something, it searches your knowledge base
instead of guessing.

---

## 7. Optional: Add Live Data Tools

### Crypto prices (free, works immediately)
Built-in. Uses CoinGecko API (no key needed).
```bash
# Test:
python -m qor chat
> What is the price of Bitcoin?
```

### Stock prices
```bash
pip install yfinance
```

### Weather data
Sign up for free API key at https://openweathermap.org
Then add your key in `custom_tools.py`.

### Web search
```bash
pip install duckduckgo-search
```

---

## Platform-Specific Notes

### Windows

**PowerShell vs Command Prompt:**
Both work. If `python` isn't found, try `py` instead:
```powershell
py -m qor setup
py -m qor train --device cuda
```

**CUDA on Windows:**
1. Install latest NVIDIA drivers from nvidia.com
2. CUDA toolkit is included with PyTorch — no separate install needed
3. Verify: `python -c "import torch; print(torch.cuda.is_available())"`

**Common Windows issue — long paths:**
If you get path errors, enable long paths in Windows:
1. Open PowerShell as Administrator
2. Run: `New-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Control\FileSystem" -Name "LongPathsEnabled" -Value 1 -PropertyType DWORD -Force`

### macOS

**Apple Silicon (M1/M2/M3):**
PyTorch uses MPS (Metal Performance Shaders) for GPU acceleration:
```bash
python -m qor train --device mps
```
If MPS causes issues, CPU works fine:
```bash
python -m qor train --device cpu
```

**Intel Mac:**
CPU only (no GPU acceleration). Works fine for small/medium models.

### Linux

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install python3 python3-pip python3-venv
```

**Using a virtual environment (recommended on Linux):**
```bash
python3 -m venv qor-env
source qor-env/bin/activate
pip install torch tokenizers flask flask-cors duckduckgo-search
```

**NVIDIA GPU on Linux:**
```bash
# Check NVIDIA driver
nvidia-smi

# If not installed:
sudo apt install nvidia-driver-535
```

---

## Common Installation Problems

### "pip: command not found"
```bash
python -m pip install torch     # Use python -m pip instead
```

### "No module named torch"
```bash
pip install torch
# or on some systems:
pip3 install torch
```

### "CUDA not available" (but you have NVIDIA GPU)
1. Check driver: `nvidia-smi` should show your GPU
2. Reinstall PyTorch with CUDA:
```bash
pip uninstall torch
pip install torch --index-url https://download.pytorch.org/whl/cu121
```

### "No space left on device"
PyTorch is ~2GB. Training data can be large.
```bash
# Check disk space
df -h .

# Use smaller dataset
python prepare_data.py --source sample     # Only 500KB
```

### "Permission denied"
```bash
pip install --user torch tokenizers flask flask-cors
```

### "SSL certificate error" (corporate network)
```bash
pip install --trusted-host pypi.org --trusted-host files.pythonhosted.org torch
```

---

## Updating QOR

When you get a new `qor.zip`:
1. Back up your trained models: `cp -r checkpoints/ checkpoints_backup/`
2. Back up your data: `cp -r data/ data_backup/`
3. Extract new zip (overwrite old qor/ folder)
4. Your models and data are preserved in their folders

---

## Uninstalling

```bash
# Remove QOR folder
rm -rf qor/

# Remove dependencies (optional)
pip uninstall torch tokenizers flask flask-cors duckduckgo-search datasets
```

---

## Next Steps After Installation

1. **Read the README.md** — Complete guide to all features
2. **Run the Quick Start** — 5 minutes to first working model
3. **Add your data** — Put .txt files in data/ for training
4. **Add knowledge base** — Put docs in knowledge/ for RAG
5. **Set up tools** — Edit custom_tools.py for live data
6. **Deploy** — Run `python -m qor serve` for API access
